{"version":3,"file":"vuex-router-history.umd.js","sources":["../src/index.js"],"sourcesContent":["export function sync (store, router, options) {\r\n  const moduleName = (options || {}).moduleName || 'history'\r\n\r\n  const currentRoute = cloneRoute(router.currentRoute)\r\n\r\n  store.registerModule(moduleName, {\r\n    namespaced: true,\r\n    state: {\r\n      stack: [currentRoute],\r\n      current: currentRoute\r\n    },\r\n    mutations: {\r\n      'ROUTE_CHANGED' (state, transition) {\r\n        const route = cloneRoute(transition.to, transition.from)\r\n        state[moduleName].stack.push(route)\r\n        state[moduleName].current = route\r\n      }\r\n    }\r\n  })\r\n\r\n  // sync store on router navigation\r\n  const afterEachUnHook = router.afterEach((to, from) => {\r\n    currentPath = to.fullPath\r\n    store.commit(moduleName + '/ROUTE_CHANGED', { to, from })\r\n  })\r\n\r\n}\r\n\r\nfunction cloneRoute (to, from) {\r\n  const clone = {\r\n    name: to.name,\r\n    path: to.path,\r\n    hash: to.hash,\r\n    query: to.query,\r\n    params: to.params,\r\n    fullPath: to.fullPath,\r\n    meta: to.meta\r\n  }\r\n  if (from) {\r\n    clone.from = cloneRoute(from)\r\n  }\r\n  return Object.freeze(clone)\r\n}"],"names":["cloneRoute","to","from","const","clone","name","path","hash","query","params","fullPath","meta","Object","freeze","store","router","options","moduleName","currentRoute","registerModule","namespaced","state","stack","current","mutations","ROUTE_CHANGED","transition","route","push","afterEach","currentPath","commit"],"mappings":"uLA4BA,SAASA,EAAYC,EAAIC,GACvBC,IAAMC,GACJC,KAAMJ,EAAGI,KACTC,KAAML,EAAGK,KACTC,KAAMN,EAAGM,KACTC,MAAOP,EAAGO,MACVC,OAAQR,EAAGQ,OACXC,SAAUT,EAAGS,SACbC,KAAMV,EAAGU,MAKX,OAHIT,IACFE,EAAMF,KAAOF,EAAWE,IAEnBU,OAAOC,OAAOT,UAzChB,SAAeU,EAAOC,EAAQC,GACnCb,IAAMc,GAAcD,OAAeC,YAAc,UAE3CC,EAAelB,EAAWe,EAAOG,cAEvCJ,EAAMK,eAAeF,GACnBG,YAAY,EACZC,OACEC,OAAQJ,GACRK,QAASL,GAEXM,WACEC,uBAAiBJ,EAAOK,GACtBvB,IAAMwB,EAAQ3B,EAAW0B,EAAWzB,GAAIyB,EAAWxB,MACnDmB,EAAMJ,GAAYK,MAAMM,KAAKD,GAC7BN,EAAMJ,GAAYM,QAAUI,MAMVZ,EAAOc,mBAAW5B,EAAIC,GAC5C4B,YAAc7B,EAAGS,SACjBI,EAAMiB,OAAOd,EAAa,qBAAoBhB,OAAIC"}