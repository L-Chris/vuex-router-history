{"version":3,"file":"vuex-router-history.es.js","sources":["../src/index.js"],"sourcesContent":["export function sync (store, router, options) {\r\n  const moduleName = (options || {}).moduleName || 'history'\r\n\r\n  const currentRoute = cloneRoute(router.currentRoute)\r\n\r\n  store.registerModule(moduleName, {\r\n    namespaced: true,\r\n    state: {\r\n      stack: [currentRoute],\r\n      current: currentRoute\r\n    },\r\n    mutations: {\r\n      'ROUTE_CHANGED' (state, transition) {\r\n        const route = cloneRoute(transition.to, transition.from)\r\n        state[moduleName].stack.push(route)\r\n        state[moduleName].current = route\r\n      }\r\n    }\r\n  })\r\n\r\n  // sync store on router navigation\r\n  const afterEachUnHook = router.afterEach((to, from) => {\r\n    currentPath = to.fullPath\r\n    store.commit(moduleName + '/ROUTE_CHANGED', { to, from })\r\n  })\r\n\r\n}\r\n\r\nfunction cloneRoute (to, from) {\r\n  const clone = {\r\n    name: to.name,\r\n    path: to.path,\r\n    hash: to.hash,\r\n    query: to.query,\r\n    params: to.params,\r\n    fullPath: to.fullPath,\r\n    meta: to.meta\r\n  }\r\n  if (from) {\r\n    clone.from = cloneRoute(from)\r\n  }\r\n  return Object.freeze(clone)\r\n}"],"names":["sync","store","router","options","const","moduleName","currentRoute","cloneRoute","registerModule","namespaced","state","stack","current","mutations","ROUTE_CHANGED","transition","route","to","from","push","afterEach","currentPath","fullPath","commit","clone","name","path","hash","query","params","meta","Object","freeze"],"mappings":"AAAO,SAASA,EAAMC,EAAOC,EAAQC,GACnCC,IAAMC,GAAcF,OAAeE,YAAc,UAE3CC,EAAeC,EAAWL,EAAOI,cAEvCL,EAAMO,eAAeH,GACnBI,YAAY,EACZC,OACEC,OAAQL,GACRM,QAASN,GAEXO,WACEC,uBAAiBJ,EAAOK,GACtBX,IAAMY,EAAQT,EAAWQ,EAAWE,GAAIF,EAAWG,MACnDR,EAAML,GAAYM,MAAMQ,KAAKH,GAC7BN,EAAML,GAAYO,QAAUI,MAMVd,EAAOkB,mBAAWH,EAAIC,GAC5CG,YAAcJ,EAAGK,SACjBrB,EAAMsB,OAAOlB,EAAa,qBAAoBY,OAAIC,MAKtD,SAASX,EAAYU,EAAIC,GACvBd,IAAMoB,GACJC,KAAMR,EAAGQ,KACTC,KAAMT,EAAGS,KACTC,KAAMV,EAAGU,KACTC,MAAOX,EAAGW,MACVC,OAAQZ,EAAGY,OACXP,SAAUL,EAAGK,SACbQ,KAAMb,EAAGa,MAKX,OAHIZ,IACFM,EAAMN,KAAOX,EAAWW,IAEnBa,OAAOC,OAAOR"}